{% extends 'base.html.twig' %}

{% block title %}
	<h1>Prog Mécanique</h1>
{% endblock %}

{% block body %}
	<div class="container-fluid">
		<div class="cadre menu mt-5">
			<div class="align-items-center d-flex">
				<div class="dropdown">
					<a class="ms-1 btn btn-sm btn-primary dropdown-toggle" href="#" role="button" id="dropdownlist" data-bs-toggle="dropdown" aria-expanded="false">
						<i class="fas fa-list-ol"></i>
						Liste des Prg
					</a>
					<ul class="dropdown-menu" aria-labelledby="dropdownlist">
						<li>
							<a class="dropdown-item" href="#">Fraisage</a>
						</li>
						<li>
							<a class="dropdown-item" href="#">Tournage</a>
						</li>
						<li><hr class="dropdown-divider"></li>
						<li>
							<a class="dropdown-item" href="#">Tous Prg</a>
						</li>
					</ul>
				</div>
				<a href="#" type='button' class='ms-1 btn btn-sm btn-primary'>
					<i class="fas fa-search"></i>
					Rechercher PRG
				</a>
				<a href='#' type='button' class='ms-1 btn btn-sm btn-warning'>
					<i class="fas fa-history"></i>
					Autre
				</a>
			</div>
			<div class="card mt-3">
				<div class='card-body'>
					<div class="d-flex justify-content-around">
						<div class="m-2">
							<div class='row g-3'>
								<div class="col-12">
									<div class="form-floating">
										<input type="number" min="0" class="form-control" id="inputDossier" placeholder="numdossier">
										<label for="inputDossier">Numero de dossier</label>
									</div>
								</div>
								<div class="col-12">
									<button type='submit' id='checkDossier' class='btn btn-success'>Recherche</button>
								</div>
								<div id="liveAlertPlaceholder"></div>
							</div>
						</div>
						<form method='POST' action='{{ path('fraisage') }}' class="m-2">
							{{ form_start(form) }}
							<div class="row g-2">
								<div class="col-6">
									<div class="form-floating">
										{{form_widget(form.client)}}
										<label for="inputClient">Client</label>
									</div>
								</div>
								<div class='row g-2'>
									<div class='col-10'>
										<div class="form-floating">
											{{ form_widget(form.refpiece)}}
											<label for="inputRef">Référence piéce</label>
										</div>
									</div>
									<div class="col-2">
										<div class="form-floating">
											{{ form_widget(form.ind)}}
											<label for="inputInd">Indice</label>
										</div>
									</div>
								</div>
								<div class="row g-2">
									<div class="col-12">
										<div class="form-floating">
											{{ form_widget(form.desigpiece) }}
											<label for="inputDesign">Désignation piéce</label>
										</div>
									</div>
								</div>
								<div class="row g-2 ms-auto">
									<div class="col-3">
										<div class="form-check">
											<input class='form-check-input'type='radio' name='Typemachine' value='fraisage' id='fraisage'>
											<label class="form-check-label" for="fraisage">
												Fraisage
											</label>
										</div>
									</div>
									<div class="col-8">
										<div class="input-group">
											{{ form_widget(form.plan)}}
											{{ form_label(form.plan)}}
											{{ form_widget(form.retourplan) }}
										</div>
									</div>
									<div class="col-3">
										<div class="form-check">
											<input class='form-check-input' type='radio' name='Typemachine' value='tournage' id='tournage'>
											<label class="form-check-label" for="tournage">
												Tournage
											</label>
										</div>
									</div>
									<div class="col-8">
										<div class="input-group">
											{{ form_widget(form.step)}}
											{{ form_label(form.step)}}
											{{ form_widget(form.retourstep)}}
										</div>
									</div>
								</div>
							</div>
							<div class="col-12 mt-2">
								<button type='submit' class='btn btn-success'>Valider le nouveau PRG</button>
								<a type='btn' class='btn btn-secondary' href='{{ path('fraisage') }}'> Annuler </a>
							</div>
							{{ form_end(form) }}
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="p-3">
	<div class="cadre liste">
		{% if listes %}
			<table class="table table-striped table-secondary table-sm ">
				<thead class="table-dark">
					<tr>
						<th scope="col">Num Prog</th>
						<th scope="col">Client</th>
						<th scope="col">Référence pièce</th>
						<th scope="col">Indice</th>
						<th scope="col">Désignation pièce</th>
						<th scope="col">Date de création</th>
					</tr>
				</thead>
				<tbody>
					{% for liste in listes %}
						<tr>
							<th scope="row">{{ liste.numprog}}</th>
							<td>{{ liste.client }}</td>
							<td>{{ liste.refpiece }}</td>
							<td>{{liste.ind}}</td>
							<td>{{ liste.desigpiece }}</td>
							<td>{{ liste.datecreat|date('d/m/Y') }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		{% endif %}
	</div>
</div>{% endblock %}{% block script %}
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="{{asset('js/progmeca.js')}}"></script>{% endblock %}
